# Define X variables in file
cat > ~/.Xenv << EOF
export XAUTHORITY="$XAUTHORITY"
export DISPLAY="$DISPLAY"
export DBUS_SESSION_BUS_ADDRESS="$DBUS_SESSION_BUS_ADDRESS"
EOF

# Start screenlocker and lock after 5 minutes
xset s on && xset s 300
xss-lock --transfer-sleep-lock -- i3lock -c 222222 --nofork &

# Map keyboard shortcuts
(sleep 1 && sxhkd) &

# Start notification daemon
(sleep 1 && dunst) &

# Start clipboard manager
(sleep 1 && clipcatd) &

# Start colour temperature adjustment
(sleep 1 && redshift) &

# Start polybar after window manager
(sleep 4 && polybar main 2>&1 | tee -a /tmp/polybar.log) & disown
# Workaround to hide polybar in fullscreen
(sleep 6 && xdo hide -n polybar && xdo show -n polybar) &
