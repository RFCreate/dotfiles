#!/bin/sh

CODE_CMD="code"

# Add custom CODE_CMD argument
while getopts "c:" opt; do
    case $opt in
        c) CODE_CMD="$OPTARG" ;;
        ?) exit ;;
    esac
done

#Skip flags in script arguments
shift "$((OPTIND - 1))"

# Get script to install github vscode extensions
curl -s --output-dir /tmp -O https://gist.githubusercontent.com/shyguyCreate/a8338ed17537e347b3aa9b34d101f1d7/raw/vsix-install.sh

# Make script executable
chmod +x /tmp/vsix-install.sh

# Install vscodium extensions from github repositories
/tmp/vsix-install.sh -c "$CODE_CMD" gitkraken/vscode-gitlens
/tmp/vsix-install.sh -c "$CODE_CMD" prettier/prettier-vscode
/tmp/vsix-install.sh -c "$CODE_CMD" foxundermoon/vs-shell-format
/tmp/vsix-install.sh -c "$CODE_CMD" PKief/vscode-material-icon-theme

# Install extensions from file
if [ -f "$(dirname "$0")/.extensions" ]; then
    while IFS= read -r extension; do
        $CODE_CMD --install-extension "$extension"
    done < "$(dirname "$0")/.extensions"
fi
