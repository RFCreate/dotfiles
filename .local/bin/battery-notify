#!/bin/sh

# Save arguments
battery_name="$1"
icon_suffix="$2"

# Exit if battery name does not exists
[ ! -d "/sys/class/power_supply/$battery_name" ] && echo "Battery '$battery_name' does not exists" && exit 1

# Get battery capacity
capacity="$(cat "/sys/class/power_supply/$battery_name/capacity")"
# Get charging status
status="$(cat "/sys/class/power_supply/$battery_name/status")"

# Define urgency level
case "$icon_suffix" in
    "full-charged")  urgency="low" ;;
    "full-charging") urgency="normal" ;;
    "good")          urgency="normal" ;;
    "low")           urgency="critical" ;;
    "caution")       urgency="critical" ;;
    *)               exit 1 ;;
esac

# Send notification
notify-send "$battery_name" "${status} battery: ${capacity}%" -i "battery-${icon_suffix}" -r 10001 -u "${urgency}"
